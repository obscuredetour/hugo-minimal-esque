<!-- highlight.js -->
{{ if .Site.Params.highlight | default false }}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

    {{ range .Site.Params.highlightLanguages }} <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/{{ . }}.min.js"></script> {{ end }}

    <script>hljs.initHighlightingOnLoad();</script>

{{ end }}

<!-- custom -->
{{ range .Site.Params.js }} <script src="{{ . | absURL }}"></script> {{ end }}

<!-- This is the JavaScript (page duty) that is responsible for the navigation
Why is this not in a seperate js file? Initially, Hugo was giving me errors when attempting it this way.
So this works & it's small. -->
<script async>
    (pageDuty => {
        
        const sideNav = document.getElementById('sideNav');
        const closeNavBtn = document.querySelector('.closeBtn');
        const toggleNavBtn = document.querySelector('.toggleNav');
        const pageOverlay = document.querySelector('.page__overlay');
        const relatedElement = document.querySelector('.related');
        const h4RelatedHeader = document.querySelector('.related-header');

        // Nav listeners
        closeNavBtn.addEventListener('click', toggleNav);
        toggleNavBtn.addEventListener('click', toggleNav);
        pageOverlay.addEventListener('click', toggleNav);
        // Nav funtion
        function toggleNav() {
            sideNav.classList.toggle('open');
        };

        // close nav menu when link is clicked
        let navItems = document.querySelectorAll(".nav__item");
        for (var i = 0; i < navItems.length; i++) {
            navItems[i].addEventListener('click', function (event) {
                toggleNav();
            });
        }

        // hide h4 'related' if no related posts found
        if (relatedElement.childElementCount == 0) {
            h4RelatedHeader.classList.toggle('hidden');
        }

    })();
</script>
